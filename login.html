<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>LOGIN</title>
        <meta charset="UTF-8">
        <link type="text/css" href="http://localhost:8080/newberry/css/custom-theme/jQuery.css" rel="Stylesheet" />
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.js"></script> 
    </head>
    <style>
        #bypassLogin{
                width: 100%;
                background-color: #808080;
                text-align: center;
                margin-bottom: 30px;
                padding: 14px 0px;
        }
        #bypassLogin button{
            padding: 8px 7px;
            background-color: #FFF;
            cursor: pointer;
            font-weight: bold;
        }
        
        #bypassLogin button:hover{
            color: blue;
        }
    </style>
    <body>
        <div id="bypassLogin"><button onclick="bypass();">Bypass Login</button></div>
        <div id="wrapper">
            <div id="content">
            <div id="main" class="ui-widget ui-widget-content ui-corner-all ui-tabs ui-helper-reset ui-helper-clearfix">
                <div id="login" class="left">
                    <h3 class="ui-widget-header ui-tabs ui-corner-all ui-state-default">Log In</h3>
                    <p> 
                        If you have your local T-PEN database set up and would like to login to test getting projects you can do so here.  The transcription interface will work
                        independent of a database if you do not have your local T-PEN database prepared.  To bypass login, <a href="newberryTrans.html">go to the transcription page directly</a>.  The URL is .../newberryTrans.html  
                        <br>  If you bypass login, all you need is a T-PEN or IIIF manifest.  The images in the manifest must be public
                        for the transcription interface to get the images/annotations/other metadata.  If the login the images are behind leave a cookie in the browser to indicate a valid login session, then login to that location in another
                        tab and the transcription interface will be able to get the images.  
                    </p>
<!--                        <div id="resetPassword">
                            <h6 id="forgetFormBtn" class="clear-right">Forgot your Password?<span class="left ui-icon ui-icon-arrowstop-1-s"></span></h6>
                            <form id="forgetForm" action="admin.jsp" method="POST" class="ui-corner-all">
                            <span>Enter the email address associated with your account to have your password reset.</span>
                                <input id="email" type="text" class="text" style="width:220px;" placeholder="Forgot your password?" name="email">
                                <input class="right ui-corner-all ui-state-default" type="submit" name="emailSubmitted" value="Reset Password"/>
                            </form>
                        </div>-->
<!--                        <form id="login" action="login.jsp" method="POST" >
                            <fieldset>
                                <legend>Login Here:</legend>
                                <label for="uname">Email</label><input class="text" type="text" name="uname"/><br/>
                                <label for="password">Password</label><input  class="text" type="password" name="password"/><br/>
                            <input type="hidden" name="ref" value="<%out.print(session.getAttribute("ref"));%>"/>
                            <input class="ui-button ui-state-default ui-corner-all right" type="submit" title="Log In" value="Log In">
                            </fieldset>
                        </form>-->
                <div id="userLogin">
                    <div>Login Here:</div>
                    <label for="uname">Email</label> <input class="text" type="text" id="uname"/> <br/>
                    <label for="password">Password</label> <input class="text" type="password" id="password"/> <br/>
                    <input class="ui-button ui-state-default ui-corner-all right" type="button" title="Log In" value="Log In"
                           onclick="userLogin();">
                </div>
                </div>
<!--                <div id="register" class="right">
                    <h3 class="ui-widget-header ui-tabs ui-corner-all ui-state-default">Register a New Account</h3>
               <form action="signup.jsp" method="POST">
               <fieldset>
                <legend>or Register as a New User:</legend>
                Note: You will receive your password via email after your account is activated by an administrator
                <label for="uname">Email</label><input class="text" type="text" name="uname"/><br/>
                <label for="fname">First Name</label><input class="text" type="text" name="fname"/><br/>
                <label for="lname">Last Name</label><input class="text" type="text" name="lname"/><br/>
               <input type="submit" value="Register" class="ui-button ui-state-default ui-corner-all right"/>
               </fieldset></form>
                </div>-->
            </div>
        </div>
        </div>
        
    </body>
</html>
<script>
    function bypass(){
        window.location.href = "newberryTrans.html";
    }
    function userLogin(){
        var userName = $('#uname').val();
        var password = $('#password').val();
        if(userName !== undefined && userName !== "" && password !== undefined && password !== ""){
            var url = "http://localhost:8080/newberry/login";
            var params = {"uname":userName, "password":password};
            $.post(url, params, function(){console.log('POSTING: '+JSON.stringify(params));},"json");
        }
        else{
            alert('You must enter a user name (E-mail) and password!');
        }
//                error: function(jqXHR,error, errorThrown) {  
//                    if(jqXHR.status && jqXHR.status==204){
//                         alert("Missing username and password"); 
//                    }
//                    else if (jqXHR.status && jqXHR.status==401) {
//                        alert("Missing username or password"); 
//                    }
//                    else{
//                        alert('Something went wrong: '+jqXHR.status);
//                    }
//               }
              
    }
    
    function registerNewUser(){
        //Need an API? 
    }
    
</script>
    
